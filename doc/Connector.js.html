<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Connector - API documentation : Source: Connector.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link href="styles/bootstrap.css" rel="stylesheet">
    <link href="styles/docs.css" rel="stylesheet">
    <link href="styles/bootstrap-custom.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
  </head>
  <body>
    <header class="header navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="#"><strong>Connector</strong> API documentation</a>
        </div>
      </div>
    </header>

    <div class="container-fluid">
      <div class="row-fluid">
          <div class="span4">
              <h2><a href="index.html">Index</a></h2><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Classes</li><li><a href="Connector.html"><i class="icon-shield" style="color: #0186d1"></i> Connector</a></li></ul></div>
          </div>

          <div class="span8">
              <h1 class="page-header">Source: Connector.js</h1>
              


    
    <section>
        <article>
            <pre class="prettyprint source"><code>this.Connector = (function(global, undefined) {
'use strict';

	/**
	 * Represents a Connector.
	 * @global
	 * @constructor
	 * @param {object} paper - A Snap Instance.
	 * @param {object} so - Source Point (Snap) Element.
	 * @param {string} sd - Source Point direction.
	 * @param {object} to - Target Point (Snap) Element.
	 * @param {string} td - Target Point direction.
	 */
	function Connector(paper, so, sd, to, td) {
		this.paper = paper;
		this.startPoint = this.getAnchor(so, sd);
		this.endPoint = this.getAnchor(to, td);
		this.direction = this.getDirection();

		this.draw(this.startPoint, this.endPoint);
		
	}

	/**
	 * @memberOf Connector
	 * @param {object} sp - Source Point (Snap) Element.
	 * @param {object} tp - Target Point (Snap) Element.
	 */
	Connector.prototype.draw = function(sp, tp) {

		var sx = sp.x;
		var sy = sp.y;
		var tx = tp.x;
		var ty = tp.y;

		this.drawLine(sx,sy,tx,ty);
		this.drawStartPoint(sx,sy);
		this.drawEndPoint(tx,ty);
	};

	/**
	 * @memberOf Connector
	 * @param  {object} element   - (Snap) Element
	 * @param  {string} direction - Anchor Direction (up, right, down, left)
	 * @return {object}           
	 */
	Connector.prototype.getAnchor = function(element, direction) {

		var x = 0;
		var y = 0;
		var sx = element.attr('x') * 1;
		var sy = element.attr('y') * 1;
		var sh = element.attr('height') * 1;
		var sw = element.attr('width') * 1;

		switch (direction) {
			case 'right':
				x = sx + sw;
				y = sy + sh/2;
			break;
			case 'up':
				x = sx + sw/2;
				y = sy;
			break;
			case 'down':
				x = sx + sw/2;
				y = sy + sh;
			break;
			case 'left':
				x = sx;
				y = sy + sh/2;
			break;
			default:
				x = sx + sw;
				y = sy + sh/2;
		}

		return { x : x, y : y, d : direction };
	};

	/**
	 * @memberOf Connector
	 * @param {number} sx - Source Point X Coordinate.
	 * @param {number} sy - Source Point Y Coordinate.
	 * @param {number} tx - Target Point X Coordinate.
	 * @param {number} ty - Target Point Y Coordinate.
	 * @return {object}  
	 */
	Connector.prototype.getDirection = function(sx, sy, tx, ty) {

		var x = 0;
		var y = 0;
		var dx = tx - sx;
		var dy = ty - sy;

		if(dx &lt; 0) {
			x = -1; // left
		} else if (dx > 0) {
			x = 1;  // right
		} else if (dx === 0) {
			x = 0;  // center
		}

		if(dy &lt; 0) {
			y = -1; // up
		} else if (dy > 0) {
			y = 1;  // down
		} else if (dy === 0) {
			y = 0;  // center
		}

		return { x : x, y : y };
	};

	/**
	 * @memberOf Connector
	 * @param {number} sx - Source Point X Coordinate.
	 * @param {number} sy - Source Point Y Coordinate.
	 * @param {number} tx - Target Point X Coordinate.
	 * @param {number} ty - Target Point Y Coordinate.
	 */
	Connector.prototype.drawLine = function(sx, sy, tx, ty) {

		var pathString = '';
		var direction = this.getDirection(sx,sy,tx,ty);

		if(direction.y === 0) {
			pathString = 'M' + sx + ',' + sy + ' L' + tx + ',' + ty;
		} else if (direction.y === 1) {
			var dx = tx - sx;
			pathString = 'M' + sx + ',' + sy;
			pathString += 'L' + (sx + (dx/2)) + ',' + sy;
			pathString += 'L' + (sx + (dx/2)) + ',' + ty;
			pathString += 'L' + tx + ',' + ty;
		}

		this.paper.path(pathString).attr({
			fill: '#FFF',
			stroke: '#000',
			strokeWidth: 1
		});
	};

	/**
	 * @memberOf Connector
	 * @param {number} sx - Point X Coordinate.
	 * @param {number} sy - Point Y Coordinate.
	 */
	Connector.prototype.drawStartPoint = function(sx, sy) {

		var radius = 4;

		this.paper.circle(sx, sy, radius);
	};

	/**
	 * @memberOf Connector
	 * @param {number} tx - Point X Coordinate.
	 * @param {number} ty - Point Y Coordinate.
	 */
	Connector.prototype.drawEndPoint = function(tx, ty) {

		var p = 'M' + tx + ',' + ty;
			p += 'L' + (tx-10) + ',' + (ty+5);
			p += 'L' + (tx-10) + ',' + (ty-5);
			p += 'L' + tx + ',' + ty;

		this.paper.path(p);
	};

	return Connector;

}(this));</code></pre>
        </article>
    </section>




          </div>
      </div>

        <br clear="both">

      <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Mon Jan 27 2014 18:37:41 GMT+0100 (MEZ)
        <br>
      </footer>
      <script> prettyPrint(); </script>
    </div>
  </body>
</html>
